<!DOCTYPE html>
<html>
  <head>
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta charset="utf-8" />
    <link rel="stylesheet" href="style.css" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">

    <style>
      

    </style>
  </head>

  <body>
    <div class="wrapper">
      <header>
        <div class="logo">
          <img src="logoKelurahan.png" alt="Logo Kelurahan">
          <div class="text">
            <h1>Sistem Informasi Data UMKM</h1>
            <p>Kelurahan Galung Maloang</p>
          </div>
        </div>
      </header>
    </div>

    <main>
      <h2>Kenali, Dukung, dan Kunjungi Usaha Warga Sekitar!</h2>
      <div class="container" id="umkmContainer"></div>
    </main>

    <footer>
      <p>Â© 2025 Kelurahan Galung Maloang</p>
    </footer>  


  <script>
    const sheetId = "1Ch-wCcxo93LQH32ZMISJT556NdpeCNmVghqvRLDbe-0";
    const apiKey = "AIzaSyBd2Uu9BcScO1XGCJFng5ZxRtX146XDx2I";
    const range = "Sheet1!B2:G";
    const url = `https://sheets.googleapis.com/v4/spreadsheets/${sheetId}/values/${range}?key=${apiKey}`;

    fetch(url)
      .then(response => response.json())
      .then(data => {
        const values = data.values;
        const container = document.getElementById('umkmContainer');

        values.forEach(row => {
          const [nama, alamat, maps, , wa, foto] = row;

        // let directFoto = foto;
        // let fileId = '';

        // Tangkap fileId dari berbagai format Google Drive link
        // if (foto.includes('file/d/')) {
        //   const match = foto.match(/\/file\/d\/([-\w]{25,})/);
        //   if (match) fileId = match[1];
        // } else if (foto.includes('id=')) {
        //   fileId = new URL(foto).searchParams.get('id');
        // }

        // if (fileId) {
        //   directFoto = `https://drive.google.com/uc?export=view&id=${fileId}`;
        // }

        const card = document.createElement('div');
        card.className = 'card';
        card.innerHTML = `
          <img class="card-img" src="${foto}" alt="Foto ${nama}">
          <div class="card-content">
            <div class="card-info">
              <h3 class="card-title">${nama}</h3>
              <p class="card-address">${alamat}</p>
            </div>
            <div class="card-footer">
              <p class="card-link">
                <i class="fa-solid fa-location-dot icon" style="margin-right: 2px;"></i>
                <a href="${maps}" target="_blank">Lihat di Google Maps</a>
              </p>
              <p class="card-phone">
                <i class="fa-brands fa-whatsapp icon" ></i>
                <a href="https://wa.me/${wa.replace(/\D/g, '')}"" target="_blank">${wa}</a>
              </p>
            </div>
          </div>

          
        `;
        container.appendChild(card);
      });



          // values.forEach(row => {
          //   const [nama, alamat, maps, , wa, foto] = row; // Lewatkan kolom Nama Pemilik UMKM (index 3)

            // Ubah link Google Drive menjadi direct image link
            // let directFoto = foto;
            // const match = foto.match(/[-\w]{25,}/);
            // if (match) {
            //   const fileId = match[0];
            //   directFoto = `https://drive.google.com/uc?export=view&id=${fileId}`;
            // }

            // Tangkap file ID dari berbagai format URL Google Drive
            // let directFoto = foto;
            // let fileId = '';

            // if (foto.includes('id=')) {
            //     fileId = new URL(foto).searchParams.get('id');
            // } else {
            //   const match = foto.match(/[-\w]{25,}/);
            //   if (match) {
            //     fileId = match[0];
            //   }
            // }

            // if (fileId) {
            //   directFoto = `https://drive.google.com/uc?export=view&id=${fileId}`;
            // }


          //   const card = document.createElement('div');
          //   card.className = 'card';
          //   card.innerHTML = `
          //     <h3>${nama}</h3>
          //     <p><strong>Alamat:</strong> ${alamat}</p>
          //     <p><strong>WhatsApp:</strong> <a href="https://wa.me/${wa.replace(/\D/g, '')}" target="_blank">${wa}</a></p>
          //     <p><a href="${maps}" target="_blank">Lihat di Maps</a></p>
          //     <img src="${directFoto}" alt="Foto ${nama}" style="width:100%; height:auto;">
          //   `;
          //   container.appendChild(card);
          // }); 
        })
        .catch(error => console.error('Gagal mengambil data:', error));


   
  </script>
  </body>
</html>


<!-- logbook 19/07 = kerja fe  13.00 - 14.30 
 20/07 = kerja fe 20.00 - 00.00
 26/07 = kumpul data 09.00 - 10.30
 26/07 = kerja be 11.30 - 14.00
 27/07 = kerja be 21.00 - 00.00
 28/07 = kerje be 21.00 - 00.00
 
 
 -->